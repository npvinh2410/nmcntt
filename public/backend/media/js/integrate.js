!function(e){"use strict";var i=$.parseJSON(localStorage.getItem("MediaConfig"))||{},n={app_key:"483a0xyzytz1242c0d520426e8ba366c530c3d9dxxx",request_params:{view_type:"tiles",filter:"everything",view_in:"my_media",search:"",sort_by:"created_at-desc",folder_id:0},hide_details_pane:!1,icons:{folder:"fa fa-folder-o"},actions_list:{basic:[{icon:"fa fa-eye",name:"Preview",action:"preview",order:0,"class":"rv-action-preview"}],file:[{icon:"fa fa-link",name:"Copy link",action:"copy_link",order:0,"class":"rv-action-copy-link"},{icon:"fa fa-pencil",name:"Rename",action:"rename",order:1,"class":"rv-action-rename"},{icon:"fa fa-copy",name:"Make a copy",action:"make_copy",order:2,"class":"rv-action-make-copy"},{icon:"fa fa-dot-circle-o",name:"Set focus point",action:"set_focus_point",order:3,"class":"rv-action-set-focus-point"}],user:[{icon:"fa fa-share-alt",name:"Share",action:"share",order:0,"class":"rv-action-share"},{icon:"fa fa-ban",name:"Remove share",action:"remove_share",order:1,"class":"rv-action-remove-share"},{icon:"fa fa-star",name:"Favorite",action:"favorite",order:2,"class":"rv-action-favorite"},{icon:"fa fa-star-o",name:"Remove favorite",action:"remove_favorite",order:3,"class":"rv-action-favorite"}],other:[{icon:"fa fa-download",name:"Download",action:"download",order:0,"class":"rv-action-download"},{icon:"fa fa-trash",name:"Move to trash",action:"trash",order:1,"class":"rv-action-trash"},{icon:"fa fa-eraser",name:"Delete permanently",action:"delete",order:2,"class":"rv-action-delete"},{icon:"fa fa-undo",name:"Restore",action:"restore",order:3,"class":"rv-action-restore"}]},denied_download:["youtube"]};i.app_key&&i.app_key===n.app_key||(i=n);var a=$.parseJSON(localStorage.getItem("RecentItems"))||[],o=function(){};o.getUrlParam=function(e,i){void 0===i&&(i=null),i||(i=window.location.search);var n=new RegExp("(?:[?&]|&)"+e+"=([^&]+)","i"),a=i.match(n);return a&&a.length>1?a[1]:null},o.asset=function(e){if("//"===e.substring(0,2)||"http://"===e.substring(0,7)||"https://"===e.substring(0,8))return e;var i="/"!==RV_MEDIA_URL.base_url.substr(-1,1)?RV_MEDIA_URL.base_url+"/":RV_MEDIA_URL.base_url;return"/"===e.substring(0,1)?i+e.substring(1):i+e},o.showAjaxLoading=function(e){void 0===e&&(e=$(".rv-media-main")),e.addClass("on-loading").append($("#rv_media_loading").html())},o.hideAjaxLoading=function(e){void 0===e&&(e=$(".rv-media-main")),e.removeClass("on-loading").find(".loading-wrapper").remove()},o.isOnAjaxLoading=function(e){return void 0===e&&(e=$(".rv-media-items")),e.hasClass("on-loading")},o.jsonEncode=function(e){return"undefined"==typeof e&&(e=null),JSON.stringify(e)},o.jsonDecode=function(e,i){if(!e)return i;if("string"==typeof e){var n;try{n=$.parseJSON(e)}catch(a){n=i}return n}return e},o.getRequestParams=function(){return window.rvMedia.options&&"modal"===window.rvMedia.options.open_in?$.extend(!0,i.request_params,window.rvMedia.options||{}):i.request_params},o.getConfigs=function(){return i},o.storeConfig=function(){localStorage.setItem("MediaConfig",o.jsonEncode(i))},o.storeRecentItems=function(){localStorage.setItem("RecentItems",o.jsonEncode(a))},o.addToRecent=function(e){e instanceof Array?_.each(e,function(e){a.push(e)}):a.push(e)},o.getItems=function(){var e=[];return $(".js-media-list-title").each(function(){var i=$(this),n=i.data()||{};n.index_key=i.index(),e.push(n)}),e},o.getSelectedItems=function(){var e=[];return $(".js-media-list-title input[type=checkbox]:checked").each(function(){var i=$(this).closest(".js-media-list-title"),n=i.data()||{};n.index_key=i.index(),e.push(n)}),e},o.getSelectedFiles=function(){var e=[];return $(".js-media-list-title[data-context=file] input[type=checkbox]:checked").each(function(){var i=$(this).closest(".js-media-list-title"),n=i.data()||{};n.index_key=i.index(),e.push(n)}),e},o.getSelectedFolder=function(){var e=[];return $(".js-media-list-title[data-context=folder] input[type=checkbox]:checked").each(function(){var i=$(this).closest(".js-media-list-title"),n=i.data()||{};n.index_key=i.index(),e.push(n)}),e},o.isUseInModal=function(){return"select-files"===o.getUrlParam("media-action")||window.rvMedia&&window.rvMedia.options&&"modal"===window.rvMedia.options.open_in},o.resetPagination=function(){RV_MEDIA_CONFIG.pagination={paged:1,posts_per_page:40,in_process_get_media:!1,has_more:!0}};var t=function(){};t.editorSelectFile=function(e){var i=o.getUrlParam("CKEditor")||o.getUrlParam("CKEditorFuncNum");if(window.opener&&i){var n=_.first(e);window.opener.CKEDITOR.tools.callFunction(o.getUrlParam("CKEditorFuncNum"),n.url),window.opener&&window.close()}};var r=function(e,n){window.rvMedia=window.rvMedia||{};var a=$("body"),t={multiple:!0,type:"*",onSelectFiles:function(e,i){}};n=$.extend(!0,t,n);var r=function(e){e.preventDefault();var a=$(this);$("#rv_media_modal").modal(),window.rvMedia.options=n,window.rvMedia.options.open_in="modal",window.rvMedia.$el=a,i.request_params.filter="everything",o.storeConfig();var t=window.rvMedia.$el.data("rv-media");"undefined"!=typeof t&&t.length>0&&(t=t[0],window.rvMedia.options=$.extend(!0,window.rvMedia.options,t||{}),"undefined"!=typeof t.selected_file_id?window.rvMedia.options.is_popup=!0:"undefined"!=typeof window.rvMedia.options.is_popup&&(window.rvMedia.options.is_popup=void 0)),0===$("#rv_media_body .rv-media-container").length?$("#rv_media_body").load(RV_MEDIA_URL.popup,function(e){e.error&&alert(e.message),$("#rv_media_body").removeClass("media-modal-loading").closest(".modal-content").removeClass("bb-loading")}):$(document).find(".rv-media-container .js-change-action[data-type=refresh]").trigger("click")};"string"==typeof e?a.on("click",e,r):e.on("click",r)};window.RvMediaStandAlone=r,$(".js-insert-to-editor").off("click").on("click",function(e){e.preventDefault();var i=o.getSelectedFiles();_.size(i)>0&&t.editorSelectFile(i)}),$.fn.rvMedia=function(e){var n=$(this);i.request_params.filter="everything","trash"===i.request_params.view_in?$(document).find(".js-insert-to-editor").prop("disabled",!0):$(document).find(".js-insert-to-editor").prop("disabled",!1),o.storeConfig(),new r(n,e)},e.EditorService=t}(this.LaravelElixirBundle=this.LaravelElixirBundle||{});